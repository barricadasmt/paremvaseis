<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/MarkerCluster.css">
        <link rel="stylesheet" href="css/MarkerCluster.Default.css">
        <link rel="stylesheet" href="css/leaflet-search.css">
        <link rel="stylesheet" href="css/leaflet-control-geocoder.Geocoder.css">
        <link rel="stylesheet" href="css/side-panel.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/form.css">

        <style>
            html, body, #map {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
            }
        </style>
        <title>Χάρτης Παρεμβάσεων ΣΜΤ</title>
    </head>
    <body>
        <!-- Left Side Panel -->
        <div id="side-panel">
            <div id="logo">
                <img src="images/logo.png" alt="Logo" width="250" />
                <div class="logo-text-block">
                    <p>ενωτική</p>
                    <p>αγωνιστική</p>
                    <p>παρέμβαση</p>
                    <p>στο σωματείο</p>
                    <p>μισθωτών τεχνικών</p>
                </div>
            </div>
            <div id="abstract">
                <h2>Χάρτης παρεμβάσεων ΣΜΤ</h2>
                <p>Εδώ μπορείς να βρεις περιστατικά εργοδοτικής αυθαιρεσίας σε εταιρείες του κλάδου...</p>
                <p><strong>Το λέμε καθαρά: η ζωή θα νικήσει, οι εργοδότες θα πληρώσουν!</strong></p>
                <p><strong>Απευθύνσου στο Σωματείο Μισθωτών Τεχνικών</strong></p>
                <button id="openModalBtn" class="open-modal-btn">Κάνε την καταγγελία σου εδώ</button>
            </div>
            <div id="social-buttons">
                <a href="https://www.facebook.com/share/pQu59s6kKo1Ye9QJ/" target="_blank">
                    <button class="social-btn" id="facebook-btn">
                        <img src="images/facebook-icon.png" alt="Facebook" width="30">
                    </button>
                </a>
                <a href="https://barricada-smt.blogspot.com/" target="_blank">
                    <button class="social-btn" id="blogspot-btn">
                        <img src="images/blogspot-icon.png" alt="Blogspot" width="30">
                    </button>
                </a>
                <a href="https://somt.gr/" target="_blank">
                    <button class="social-btn" id="site-btn">
                        <img src="images/site-icon.png" alt="Website" width="30">
                    </button>
                </a>
            </div>
        </div>

        <!-- Modal for Form -->
        <div id="incidentModal" class="modal">
            <div class="modal-content">
                <span id="closeModalBtn" class="close-btn">&times;</span>
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfkS-dcMnYpMnYyx9IC2eQMji1yCnqwdSFMS4dV3aEahqiTCw/viewform?embedded=true"
                    width="640" height="1914" frameborder="0" marginheight="0" marginwidth="0">Loading…
                </iframe>
            </div>
        </div>

        <!-- Map -->
        <div id="map"></div>

        <!-- Scripts -->
        <script src="data/d_1.js"></script>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet-control-geocoder.Geocoder.js"></script>
        <script src="js/leaflet.markercluster.js"></script>
        <script src="js/leaflet-search.js"></script>       
        <script src="js/custom_icons.js"></script>
        <script src="js/form.js"></script>

        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;
            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
                highlightLayer.setStyle({ color: '#ffff00' });
            } else {
                highlightLayer.setStyle({ fillColor: '#ffff00', fillOpacity: 1 });
            }
        }

        var map = L.map('map', { zoomControl:false, maxZoom:28, minZoom:1 })
            .fitBounds([[33.9605, 17.1721],[41.3331, 31.6972]]);

        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});

        var zoomControl = L.control.zoom({ position: 'topright' }).addTo(map);
        var bounds_group = new L.featureGroup([]);

        // OpenStreetMap Layer with HTTPS
        map.createPane('pane_OSMStandard_0');
        map.getPane('pane_OSMStandard_0').style.zIndex = 400;
        var layer_OSMStandard_0 = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            pane: 'pane_OSMStandard_0',
            opacity: 1.0,
            attribution: '© OpenStreetMap contributors',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        }).addTo(map);

        // GeoJSON layer
        // GeoJSON layer
        var layer__1 = new L.geoJson(json__1, {
            onEachFeature: pop__1,
            pointToLayer: customPointToLayer
        });
        layer__1.addTo(map);
        var cluster__1 = new L.MarkerClusterGroup({ showCoverageOnHover: false, spiderfyDistanceMultiplier: 2 });
        cluster__1.addLayer(layer__1);
        cluster__1.addTo(map);
        bounds_group.addLayer(layer__1);

        // Geocoder
        var osmGeocoder = new L.Control.Geocoder({ collapsed: true, position: 'topright' }).addTo(map);
        document.querySelector('.leaflet-control-geocoder-icon').classList.add('fa', 'fa-search');

        // Search
        map.addControl(new L.Control.Search({
            layer: cluster__1,
            initial: false,
            hideMarkerOnCollapse: true,
            propertyName: 'Name'
        }));
        document.querySelector('.search-button').classList.add('fa', 'fa-binoculars');
        </script>
    </body>
</html>
